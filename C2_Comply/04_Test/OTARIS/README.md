# <img src="../../../images/test.png" alt ='test'  width="10%" > SCRATCh - DevOps - Release Tools - FirmwareCheck

# FirmwareCheck

![](https://img.shields.io/badge/status-available-green)
[![SCRATCh - funded by BMBF](https://img.shields.io/badge/part%20of-SCRATCh-yellow)](https://scratch-itea3.eu/)
![SCRATCh - funded by BMBF](https://img.shields.io/badge/funded%20by-BMBF-blue)
[![ITEA3](https://img.shields.io/badge/supported%20by-ITEA3-orange)](https://www.itea3.org)

## A tool for automated dynamic security testing on IoT-Firmwares to be used in the testing phase

### FirmwareCheck emulates a firmware, generated by [buildroot](https://buildroot.org/) (or any firmware that can be emulated using [QEMU](https://www.qemu.org/)), and runs dynamic security checks to detect configuration issues early on during the development. FirmwareCheck can also be used for hardening purposes on any live linux system.

### Structure of the tool
FirmwareCheck is a tool for automated dynamic security analysis of firmware images generated by [buildroot](https://buildroot.org/). Running in a CI-pipeline, it allows developers to identify security risks while developing IoT-firmware.
FirmwareCheck emulates the firmware using [QEMU](https://www.qemu.org/).

In order to be able to run on as many systems as possible, dependencies are low on the side of the analyzed system, and any system with `sh` and core linux utils should be able to run FirmwareCheck.

An integration in a CI-pipeline looks like this:
* üîßüë∑ Generate a firmware image with buildroot
* ‚úÖ‚ùå Run checks on generated firmware
* üÜóüîß Release firmware if checks have passed

You can also run the shellscript on any live linux host to find ways to harden your system.

#### Features

A firmware is scanned for typical IoT security issues, including:
* Outdated Components (CVEs)
* Open Serial Ports (Debug-Ports)
* Default passwords or anonymous logins on Databases (currently only MySQL)
* Open Ports
* Processes running as root
* Executables that can be used by a hacker to get a reverse shell on a device

### Prerequisites for usage
In order to have your firmware emulated by QEMU and have FirmwareCheck run in CI, you need to use one of the [supported boards](https://wiki.qemu.org/Documentation/Platforms). For running the standalone script, there are no prerequisites but a basic shell on a Linux system.

## Implementation & Configuration
See the [GitHub repository](https://github.com/OTARIS/FirmwareCheck) for instructions.

### Running a demonstrator 
Clone the [GitHub repository](https://github.com/OTARIS/FirmwareCheck) and run
```bash
sudo docker build . -t vulnerable_firmware && sudo docker run -it vulnerable_firmware:latest /bin/bash
```
In the container, run
```bash
./firmware_check_yml.sh
```

##### Generating a report
If you additionaly want to generate a html/pdf report, copy the file `fc_output.yaml` to your host and run `generate_report.py <path to fc_output.yaml>`.

In order for this to work, you need to install the following dependencies on your host. On Kali this can be done using:
```bash
pip3 install -r requirements.txt
sudo apt install linux-exploit-suggester exploitdb wkhtmltopdf`
```
For ubuntu/debian/other, you need to install exploitdb and linux-exploit-suggester yourself. The easiest way is to add the kali repositories in ubuntu and import the signing keys:
```bash
sudo apt install gnupg
wget 'https://archive.kali.org/archive-key.asc'
sudo apt-key add archive-key.asc && rm archive-key.asc
sudo sh -c "echo 'deb https://http.kali.org/kali kali-rolling main non-free contrib' > /etc/apt/sources.list.d/kali.list"
sudo apt update
```
